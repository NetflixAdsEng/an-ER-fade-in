// pk-component-assets

// IMPORTANT!!! GWD Compatibility
// Component dependencies must be browser-safe Javascript


var ComponentAssets = new function () {
	var assets = [];

	/**
		@memberOf WcAssets
		@method add
		@param {string} path 
			relative path to an asset, like `'./images/rubber_ducky.png'`
		@param {string} src
			base64-encoded asset, optional
		@desc 
			Add a path to a component asset. Update a path with a data-src.
	*/
	this.add = function (path, src) {
		var asset = getAsset(path);
		if (asset) {
			asset.src = src || null;
		}
		else {
			assets.push({
				path: path,
				src: src || null
			});
		}
	}

	/**
		@memberOf WcAssets
		@method get
		@param {string} path 
			relative path to an asset, like `'./images/rubber_ducky.png'`
		@desc 
			If the asset path has been declared, and:
			 - if a src has been provided, the asset data will be returned.
			 - if a src has NOT been provided, the asset path will be returned. 

			If the asset path has NOT been declared:
			 - the path will be returned.
	*/
	this.get = function (path) {
		var asset = getAsset(path);
		if (asset) {
			return asset.src || asset.path;
		} 
		else {
			return path;
		}
	}


	// internal
	function getAsset(path) {
		for (var i in assets) {
			if (assets[i].path == path) {
				return assets[i];
			}
		}	
	}


}